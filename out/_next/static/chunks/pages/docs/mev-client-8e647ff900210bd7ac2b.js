(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[940],{2802:function(e,t,n){"use strict";var a=n(5893),s=n(1163),o=function(e){e.height;return(0,a.jsx)("svg",{width:"140",height:"140",viewBox:"0 0 291 69",fill:"none"})},i={"en-US":"Scaling Decentralized Finance"};t.Z={github:"https://github.com/manifoldfinance/documentation",docsRepositoryBase:"https://github.com/manifoldfinance/documentation/blob/master/pages",titleSuffix:" \u2013 Manifold Finance",search:!0,unstable_stork:!0,logo:function(){var e=(0,s.useRouter)().locale;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o,{height:18}),(0,a.jsx)("span",{className:"mx-2 font-extrabold hidden md:inline select-none",children:"Manifold Finance"}),(0,a.jsx)("span",{className:"text-gray-600 font-normal hidden lg:!inline whitespace-no-wrap",children:i[e]})]})},head:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/favicon/apple-touch-icon.png"}),(0,a.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/favicon/favicon-32x32.png"}),(0,a.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/favicon/favicon-16x16.png"}),(0,a.jsx)("link",{rel:"manifest",href:"/favicon/site.webmanifest"}),(0,a.jsx)("link",{rel:"mask-icon",href:"/favicon/safari-pinned-tab.svg",color:"#000000"}),(0,a.jsx)("meta",{name:"msapplication-TileColor",content:"#ffffff"}),(0,a.jsx)("meta",{name:"theme-color",content:"#ffffff"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),(0,a.jsx)("meta",{httpEquiv:"Content-Language",content:"en"}),(0,a.jsx)("meta",{name:"description",content:"Scaling Decentralized Finance"}),(0,a.jsx)("meta",{name:"og:description",content:"Scaling Decentralized Finance"}),(0,a.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,a.jsx)("meta",{name:"twitter:site",content:"@foldfinance"}),(0,a.jsx)("meta",{name:"twitter:image",content:"https://pbs.twimg.com/profile_images/1389765714551189504/UO8fuMRI_400x400.jpg"}),(0,a.jsx)("meta",{name:"og:title",content:"Manifold Finance Documentation"}),(0,a.jsx)("meta",{name:"og:url",content:"https://docs.manifoldfinance.com"}),(0,a.jsx)("meta",{name:"og:image",content:"https://pbs.twimg.com/profile_images/1389765714551189504/UO8fuMRI_400x400.jpg"}),(0,a.jsx)("meta",{name:"apple-mobile-web-app-title",content:"Manifold Finance Documentation"}),(0,a.jsx)("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css",media:"print",onLoad:"this.media='all'"})]}),footerEditLink:function(e){switch(e.locale){case"zh-CN":return"\u5728 GitHub \u4e0a\u7f16\u8f91\u672c\u9875";case"es-ES":return"Edite esta p\xe1gina en GitHub";case"ja":return"Github \u3067\u7de8\u96c6\u3059\u308b";default:return"Edit this page on GitHub"}},footerText:function(e){switch(e.locale){case"zh-CN":return(0,a.jsxs)("a",{href:"https://manifoldfinance.com/?utm_source=swr_zh-cn",target:"_blank",rel:"noopener",className:"inline-flex items-center no-underline text-current font-semibold",children:[(0,a.jsx)("span",{className:"mr-2",children:"\u7531"}),(0,a.jsx)("span",{className:"mr-2",children:(0,a.jsx)("manifoldfinance",{})}),"\u9a71\u52a8"]});case"es-ES":return(0,a.jsxs)("a",{href:"https://manifoldfinance.com/?utm_source=swr_es-es",target:"_blank",rel:"noopener",className:"inline-flex items-center no-underline text-current font-semibold",children:[(0,a.jsx)("span",{className:"mr-2",children:"Desarrollado por"}),(0,a.jsx)("span",{className:"mr-2",children:(0,a.jsx)("manifoldfinance",{})})]});case"ja":return(0,a.jsxs)("a",{href:"https://manifoldfinance.com/?utm_source=swr_ja",target:"_blank",rel:"noopener",className:"inline-flex items-center no-underline text-current font-semibold",children:[(0,a.jsx)("span",{className:"mr-2",children:"\u63d0\u4f9b"}),(0,a.jsx)("span",{className:"mr-2",children:(0,a.jsx)("manifoldfinance",{})})]});default:return(0,a.jsxs)("a",{href:"https://manifoldfinance.com/?utm_source=swr",target:"_blank",rel:"noopener",className:"inline-flex items-center no-underline text-current font-semibold",children:[(0,a.jsx)("span",{className:"mr-1",children:"Powered by"}),"Ethereum",(0,a.jsx)("span",{children:(0,a.jsx)("manifoldfinance",{})})]})}},i18n:[{locale:"en-US",text:"English"},{locale:"es-ES",text:"Espa\xf1ol"},{locale:"zh-CN",text:"\u7b80\u4f53\u4e2d\u6587"},{locale:"ja",text:"\u65e5\u672c\u8a9e"}]}},3816:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var a=n(7375),s=n(6156),o=(n(7294),n(2763)),i=n(1163),r=n(7829),l=n.n(r),c=n(3805),p=n(2802);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var m=function(e){return(0,c.withSSG)(l()({filename:"mev-client.en-US.mdx",route:"/docs/mev-client",meta:{},pageMap:[{name:"docs",children:[{name:"getting-started",route:"/docs/getting-started",locale:"en-US"},{name:"mev-client",route:"/docs/mev-client",locale:"en-US"}],route:"/docs"},{name:"examples",children:[{name:"basic",route:"/examples/basic",frontMatter:{title:"Basic Usage",full:!0},locale:"en-US"}],route:"/examples"},{name:"index",route:"/",frontMatter:{title:"Manifold Finance"},locale:"en-US"},{name:"meta.json",meta:{index:{title:"Introduction",type:"nav",hidden:!0},docs:{title:"Docs",type:"nav"},YCabal:{title:"YCabal",type:"nav"},blog:{title:"Blog",type:"nav"}},locale:"en-US"}]},p.Z))(e)};function d(e){var t=e.components,n=(0,a.Z)(e,["components"]);return(0,o.kt)(m,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({components:t},n),(0,o.kt)("h1",null,"GreyPool"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"stratumss://")),(0,o.kt)("h2",null,"Transaction Pool Feeds"),(0,o.kt)("p",null,"This fork of Geth includes two new types of subscriptions, available through the\neth_subscribe method on Websockets."),(0,o.kt)("h3",null,"Rejected Transactions"),(0,o.kt)("p",null,"Using Websockets, you can subscribe to a feed of rejected transactions with:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'{"id": 0, "method": "eth_subscribe", "params":["rejectedTransactions"]}\n')),(0,o.kt)("p",null,"This will immediately return a payload of the form:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'{"jsonrpc":"2.0","id":0,"result":"$SUBSCRIPTION_ID"}\n')),(0,o.kt)("p",null,"And as messages are rejected by the transaction pool, it will send additional\nmessages of the form:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'{\n  "jsonrpc": "2.0",\n  "method": "eth_subscription",\n  "params": {\n    "subscription": "$SUBSCRIPTION_ID",\n    "result": {\n      "tx": "$ETHEREUM_TRANSACTION",\n      "reason": "$REJECT_REASON"\n    }\n  }\n}\n')),(0,o.kt)("p",null,"One message will be emitted on this feed for every transaction rejected by the\ntransaction pool, excluding those rejected because they were already known by\nthe transaction pool."),(0,o.kt)("p",null,"It is important that consuming applications process messages quickly enough to\nkeep up with the process. Geth will buffer up to 20,000 messages, but if that\nthreshold is reached the subscription will be discarded by the server."),(0,o.kt)("p",null,"The reject reason corresponds to the error messages returned by Geth within the\ntxpool. At the time of this writing, these include:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"invalid sender"),(0,o.kt)("li",{parentName:"ul"},"nonce too low"),(0,o.kt)("li",{parentName:"ul"},"transaction underpriced"),(0,o.kt)("li",{parentName:"ul"},"replacement transaction underpriced"),(0,o.kt)("li",{parentName:"ul"},"insufficient funds for gas * price + value"),(0,o.kt)("li",{parentName:"ul"},"intrinsic gas too low"),(0,o.kt)("li",{parentName:"ul"},"exceeds block gas limit"),(0,o.kt)("li",{parentName:"ul"},"negative value"),(0,o.kt)("li",{parentName:"ul"},"oversized data")),(0,o.kt)("p",null,"However it is possible that in the future Geth may add new error types that\ncould be included by this response without modification to the rejection feed\nitself."),(0,o.kt)("h2",null,"Dropped Transactions"),(0,o.kt)("p",null,"Using Websockets, you can subscribe to a feed of dropped transaction hashes with:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'{"id": 0, "method": "eth_subscribe", "params":["droppedTransactions"]}\n')),(0,o.kt)("p",null,"This will immediately return a payload of the form:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'{"jsonrpc":"2.0","id":0,"result":"$SUBSCRIPTION_ID"}\n')),(0,o.kt)("p",null,"And as messages are dropped from the transaction pool, it will send additional\nmessages of the form:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'{\n  "jsonrpc": "2.0",\n  "method": "eth_subscription",\n  "params": {\n    "subscription": "0xe5fa5d3c8ec05953bd746a784cfeade6",\n    "result": {\n      "txhash": "$TRANSACTION_HASH",\n      "reason": "$REASON"\n    }\n  }\n}\n')),(0,o.kt)("p",null,"One message will be emitted on this feed for every transaction dropped from the\ntransaction pool."),(0,o.kt)("p",null,"It is important that consuming applications process messages quickly enough to\nkeep up with the process. Geth will buffer up to 20,000 messages, but if that\nthreshold is reached the subscription will be discarded by the server."),(0,o.kt)("p",null,"The following reasons may be included as reasons transactions were rejected:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"underpriced-txs: Indicates the transaction's gas price is below the node's threshold."),(0,o.kt)("li",{parentName:"ul"},"low-nonce-txs: Indicates that the account nonce for the sender of this transaction has exceeded the nonce on this transction. That may happen when this transaction is included in a block, or when a replacement transaction is included in a block."),(0,o.kt)("li",{parentName:"ul"},"unpayable-txs: Indicates that the sender lacks sufficient funds to pay the intrinsic gas for this transaction"),(0,o.kt)("li",{parentName:"ul"},"account-cap-txs: Indicates that this account has sent enough transactions to exceed the per-account limit on the node."),(0,o.kt)("li",{parentName:"ul"},"replaced-txs: Indicates that the transaction was dropped because a replacement transaction with the same nonce and higher gas has replaced it."),(0,o.kt)("li",{parentName:"ul"},"unexecutable-txs: Indicates that a transaction is no longer considered executable. This typically applies to queued transaction, when a dependent pending transaction was removed for a reason such as unpayable-txs."),(0,o.kt)("li",{parentName:"ul"},"truncating-txs: The transaction was dropped because the number of transactions in the mempool exceeds the allowable limit."),(0,o.kt)("li",{parentName:"ul"},"old-txs: The transaction was dropped because it has been in the mempool longer than the allowable period of time without inclusion in a block."),(0,o.kt)("li",{parentName:"ul"},"updated-gas-price: The node's minimum gas price was updated, and transactions below that price were dropped.")),(0,o.kt)("h2",null,"MEV Clients"),(0,o.kt)("h3",null,"Flashbots"),(0,o.kt)("pre",null,(0,o.kt)("code",{className:"language-go",parentName:"pre"},"func (pool *TxPool) AddMevBundle(txs types.Transactions, blockNumber *big.Int, minTimestamp, maxTimestamp uint64) error {\n    pool.mu.Lock()\n    defer pool.mu.Unlock()\n\n    pool.mevBundles = append(pool.mevBundles, mevBundle{\n        txs:          txs,\n        blockNumber:  blockNumber,\n        minTimestamp: minTimestamp,\n        maxTimestamp: maxTimestamp,\n    })\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{className:"language-go",parentName:"pre"},"// MevBundles returns a list of bundles valid for the given blockNumber/blockTimestamp, also prunes bundles that are outdated\nfunc (pool *TxPool) MevBundles(blockNumber *big.Int, blockTimestamp uint64) ([]types.Transactions, error) {\n    return nil, nil\n}\n")))}d.isMDXComponent=!0;var h=d;function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=function(e){(0,i.useRouter)().locale;return(0,o.kt)(h,b(b({},e),{},{mdxType:"Page_0"}))};function k(e){var t=e.components,n=(0,a.Z)(e,["components"]);return(0,o.kt)(g,b({components:t},n))}k.isMDXComponent=!0;var x=k},5149:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/mev-client",function(){return n(3816)}])}},function(e){e.O(0,[843,774,888,179],(function(){return t=5149,e(e.s=t);var t}));var t=e.O();_N_E=t}]);